<!-- HTML header for doxygen 1.8.20-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Digital Power Starter Kit 3 Firmware: Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mchp.css" rel="stylesheet" type="text/css"/>
<link href="mchp_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color: #000000;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 36px;">
  <td id="projectlogo" style="padding-left: 0.2em; vertical-align: middle;"><img alt="Logo" src="microchip-docs.png"/></td>
  <td id="projectalign" style="padding-left: 0.0em;">
   <div id="projectname" style="color: white; font-size:16px;">Digital Power Starter Kit 3 Firmware
   &#160;<span id="projectnumber" style="color: light-grey; font-size:12px;">DM330017-3, Rev.3.0</span>
   </div>
   <div id="projectbrief" style="color: grey; font-size:12px;">dsPIC33C Buck Converter Peak Current Mode Control Example</div>
  </td>
   <td style="padding-top: 10px; height: 20px; vertical-align: top;">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a00520.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Functions<div class="ingroups"><a class="el" href="a00369.html">Device Driver Library Layer</a> &raquo; <a class="el" href="a00507.html">Buck Converter Library</a> &raquo; <a class="el" href="a00518.html">Buck Converter Library Modules</a> &raquo; <a class="el" href="a00519.html">Buck Converter State Machine</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions of the second library layer.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Functions:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00520.svg" width="283" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad7e9313aae7c26b9b4c6c16aedb55fe9"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00520.html#gad7e9313aae7c26b9b4c6c16aedb55fe9">State_Initialize</a> (volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *buckInstance)</td></tr>
<tr class="memdesc:gad7e9313aae7c26b9b4c6c16aedb55fe9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function resets the counters and conditional flag bits.  <a href="a00520.html#gad7e9313aae7c26b9b4c6c16aedb55fe9">More...</a><br /></td></tr>
<tr class="separator:gad7e9313aae7c26b9b4c6c16aedb55fe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga402a47948ae8a83bdde86943817dc563"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00520.html#ga402a47948ae8a83bdde86943817dc563">State_Reset</a> (volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *buckInstance)</td></tr>
<tr class="memdesc:ga402a47948ae8a83bdde86943817dc563"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function resets the buck control operation by re-initiating the control mode, references and status bits.  <a href="a00520.html#ga402a47948ae8a83bdde86943817dc563">More...</a><br /></td></tr>
<tr class="separator:ga402a47948ae8a83bdde86943817dc563"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b98919a3bcf73d8fbe7a5a065f7bce5"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00520.html#ga4b98919a3bcf73d8fbe7a5a065f7bce5">State_Standby</a> (volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *buckInstance)</td></tr>
<tr class="memdesc:ga4b98919a3bcf73d8fbe7a5a065f7bce5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function waits until all start-up conditions are met.  <a href="a00520.html#ga4b98919a3bcf73d8fbe7a5a065f7bce5">More...</a><br /></td></tr>
<tr class="separator:ga4b98919a3bcf73d8fbe7a5a065f7bce5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa99ed0f3434e9a996a103eaede4f9b18"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00520.html#gaa99ed0f3434e9a996a103eaede4f9b18">State_RampUp</a> (volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *buckInstance)</td></tr>
<tr class="memdesc:gaa99ed0f3434e9a996a103eaede4f9b18"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function ramps up the voltage/input to its nominal value.  <a href="a00520.html#gaa99ed0f3434e9a996a103eaede4f9b18">More...</a><br /></td></tr>
<tr class="separator:gaa99ed0f3434e9a996a103eaede4f9b18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga08d001728fca0ef9e1d25f55dbaaea95"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00520.html#ga08d001728fca0ef9e1d25f55dbaaea95">State_Online</a> (volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *buckInstance)</td></tr>
<tr class="memdesc:ga08d001728fca0ef9e1d25f55dbaaea95"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function tunes the controller reference to the new user control reference level.  <a href="a00520.html#ga08d001728fca0ef9e1d25f55dbaaea95">More...</a><br /></td></tr>
<tr class="separator:ga08d001728fca0ef9e1d25f55dbaaea95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga35f16ef7f56a1abf97896440b041161b"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00520.html#ga35f16ef7f56a1abf97896440b041161b">State_Error</a> (volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *buckInstance)</td></tr>
<tr class="memdesc:ga35f16ef7f56a1abf97896440b041161b"><td class="mdescLeft">&#160;</td><td class="mdescRight">If this function is called, the state machine is reset to INITIALIZE (URL=<a class="el" href="a00520.html#gad7e9313aae7c26b9b4c6c16aedb55fe9">State_Initialize</a>).  <a href="a00520.html#ga35f16ef7f56a1abf97896440b041161b">More...</a><br /></td></tr>
<tr class="separator:ga35f16ef7f56a1abf97896440b041161b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd73e6f19bdc95fba0a9d8795c1700b1"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00520.html#gadd73e6f19bdc95fba0a9d8795c1700b1">SubState_PowerOnDelay</a> (volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *buckInstance)</td></tr>
<tr class="memdesc:gadd73e6f19bdc95fba0a9d8795c1700b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function delays the startup until the Power-on Delay has expired.  <a href="a00520.html#gadd73e6f19bdc95fba0a9d8795c1700b1">More...</a><br /></td></tr>
<tr class="separator:gadd73e6f19bdc95fba0a9d8795c1700b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacf20000e16289d4bab8ed1d42dec2669"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00520.html#gacf20000e16289d4bab8ed1d42dec2669">SubState_PrepareVRampUp</a> (volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *buckInstance)</td></tr>
<tr class="memdesc:gacf20000e16289d4bab8ed1d42dec2669"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function calculate and pre-charge PWM outputs with ideal duty cycle.  <a href="a00520.html#gacf20000e16289d4bab8ed1d42dec2669">More...</a><br /></td></tr>
<tr class="separator:gacf20000e16289d4bab8ed1d42dec2669"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga588a594f3e5f4a20cf955b9445887be1"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00520.html#ga588a594f3e5f4a20cf955b9445887be1">SubState_VRampUp</a> (volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *buckInstance)</td></tr>
<tr class="memdesc:ga588a594f3e5f4a20cf955b9445887be1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function ramps up the output voltage to its nominal regulation point.  <a href="a00520.html#ga588a594f3e5f4a20cf955b9445887be1">More...</a><br /></td></tr>
<tr class="separator:ga588a594f3e5f4a20cf955b9445887be1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26b5ad6b744a8e6a608e16afc96d8cc4"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00520.html#ga26b5ad6b744a8e6a608e16afc96d8cc4">SubState_IRampUp</a> (volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *buckInstance)</td></tr>
<tr class="memdesc:ga26b5ad6b744a8e6a608e16afc96d8cc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is for the average current mode control where the output current is ramped up to nominal current.  <a href="a00520.html#ga26b5ad6b744a8e6a608e16afc96d8cc4">More...</a><br /></td></tr>
<tr class="separator:ga26b5ad6b744a8e6a608e16afc96d8cc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadfc2360fea5c8060908d58b134039f33"><td class="memItemLeft" align="right" valign="top">volatile uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00520.html#gadfc2360fea5c8060908d58b134039f33">SubState_PowerGoodDelay</a> (volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *buckInstance)</td></tr>
<tr class="memdesc:gadfc2360fea5c8060908d58b134039f33"><td class="mdescLeft">&#160;</td><td class="mdescRight">In this function, a counter is incremented until the power good delay has expired.  <a href="a00520.html#gadfc2360fea5c8060908d58b134039f33">More...</a><br /></td></tr>
<tr class="separator:gadfc2360fea5c8060908d58b134039f33"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions of the second library layer. </p>
<p>This is the detailed description of functions of the state machine of the buck converter device driver library. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga35f16ef7f56a1abf97896440b041161b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga35f16ef7f56a1abf97896440b041161b">&#9670;&nbsp;</a></span>State_Error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t State_Error </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *&#160;</td>
          <td class="paramname"><em>buckInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If this function is called, the state machine is reset to INITIALIZE (URL=<a class="el" href="a00520.html#gad7e9313aae7c26b9b4c6c16aedb55fe9">State_Initialize</a>). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buckInstance</td><td>Pointer to a Buck Converter data object of type struct <a class="el" href="a01236.html" title="BUCK control &amp; monitoring data structure.">BUCK_CONVERTER_s</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success)</dd></dl>
<p>This function is a default anchor in case task list index #0 is ever called. This is the equivalent of a switch case "default". </p>

<p class="definition">Definition at line <a class="el" href="a00257_source.html#l00363">363</a> of file <a class="el" href="a00257_source.html">dev_buck_opstates.c</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00520_ga35f16ef7f56a1abf97896440b041161b_cgraph.svg" width="660" height="111"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gad7e9313aae7c26b9b4c6c16aedb55fe9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7e9313aae7c26b9b4c6c16aedb55fe9">&#9670;&nbsp;</a></span>State_Initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t State_Initialize </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *&#160;</td>
          <td class="paramname"><em>buckInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function resets the counters and conditional flag bits. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buckInstance</td><td>Pointer to a Buck Converter data object of type struct <a class="el" href="a01236.html" title="BUCK control &amp; monitoring data structure.">BUCK_CONVERTER_s</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success)</dd></dl>
<p>If the controller has not been run yet, the POWER ON and POWER GOOD delay counters are reset and all conditional flag bits are cleared. Status of power source, ADC and current sensor calibration have to be set during runtime by system check routines. </p>

<p class="definition">Definition at line <a class="el" href="a00257_source.html#l00054">54</a> of file <a class="el" href="a00257_source.html">dev_buck_opstates.c</a>.</p>

</div>
</div>
<a id="ga08d001728fca0ef9e1d25f55dbaaea95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga08d001728fca0ef9e1d25f55dbaaea95">&#9670;&nbsp;</a></span>State_Online()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t State_Online </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *&#160;</td>
          <td class="paramname"><em>buckInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function tunes the controller reference to the new user control reference level. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buckInstance</td><td>Pointer to a Buck Converter data object of type struct <a class="el" href="a01236.html" title="BUCK control &amp; monitoring data structure.">BUCK_CONVERTER_s</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success)</dd></dl>
<p>After soft-start and when state POWER_GOOD_DELAY has expired, the converter enters normal operation.</p>
<p>During normal operation the state machine scans the user reference setting. Once a change between the user reference setting and the most recent controller reference has been detected, the state machine will tune the controller reference to the new user control reference level in incremental steps, applying the same ramp slope as during soft-start.</p>
<p>While ramping the output voltage up or down, the BUSY bit will be set and any new changes to the reference will be ignored until the ramp up/down is complete. </p>

<p class="definition">Definition at line <a class="el" href="a00257_source.html#l00315">315</a> of file <a class="el" href="a00257_source.html">dev_buck_opstates.c</a>.</p>

</div>
</div>
<a id="gaa99ed0f3434e9a996a103eaede4f9b18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa99ed0f3434e9a996a103eaede4f9b18">&#9670;&nbsp;</a></span>State_RampUp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t State_RampUp </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *&#160;</td>
          <td class="paramname"><em>buckInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function ramps up the voltage/input to its nominal value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buckInstance</td><td>Pointer to a Buck Converter data object of type struct <a class="el" href="a01236.html" title="BUCK control &amp; monitoring data structure.">BUCK_CONVERTER_s</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 = BUCK_OPSRET_REPEAT </dd>
<dd>
1 = BUCK_OPSRET_COMPLETE </dd>
<dd>
2 = BUCK_OPSRET_REPEAT</dd></dl>
<p>After a successful state machine Standby, the state machine executes the RAMPUP mode. In this mode, the voltage/current ramps up to the nominal value. <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="a00257_source.html#l00225">225</a> of file <a class="el" href="a00257_source.html">dev_buck_opstates.c</a>.</p>

</div>
</div>
<a id="ga402a47948ae8a83bdde86943817dc563"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga402a47948ae8a83bdde86943817dc563">&#9670;&nbsp;</a></span>State_Reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t State_Reset </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *&#160;</td>
          <td class="paramname"><em>buckInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function resets the buck control operation by re-initiating the control mode, references and status bits. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buckInstance</td><td>Pointer to a Buck Converter data object of type struct <a class="el" href="a01236.html" title="BUCK control &amp; monitoring data structure.">BUCK_CONVERTER_s</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success)</dd></dl>
<p>After successful initialization or after an externally triggered state machine reset, the state machine returns to this RESET mode, re-initiating control mode, references and status bits before switching further into STANDBY mode. </p>

<p class="definition">Definition at line <a class="el" href="a00257_source.html#l00104">104</a> of file <a class="el" href="a00257_source.html">dev_buck_opstates.c</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00520_ga402a47948ae8a83bdde86943817dc563_cgraph.svg" width="667" height="111"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga4b98919a3bcf73d8fbe7a5a065f7bce5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4b98919a3bcf73d8fbe7a5a065f7bce5">&#9670;&nbsp;</a></span>State_Standby()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t State_Standby </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *&#160;</td>
          <td class="paramname"><em>buckInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function waits until all start-up conditions are met. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buckInstance</td><td>Pointer to a Buck Converter data object of type struct <a class="el" href="a01236.html" title="BUCK control &amp; monitoring data structure.">BUCK_CONVERTER_s</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success)</dd></dl>
<p>After a successful state machine reset, the state machine waits in <br  />
 STANDBY mode until all conditional flag bits are set/cleared allowing <br  />
 the converter to run. </p>

<p class="definition">Definition at line <a class="el" href="a00257_source.html#l00159">159</a> of file <a class="el" href="a00257_source.html">dev_buck_opstates.c</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00520_ga4b98919a3bcf73d8fbe7a5a065f7bce5_cgraph.svg" width="338" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ga26b5ad6b744a8e6a608e16afc96d8cc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga26b5ad6b744a8e6a608e16afc96d8cc4">&#9670;&nbsp;</a></span>SubState_IRampUp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t SubState_IRampUp </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *&#160;</td>
          <td class="paramname"><em>buckInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is for the average current mode control where the output current is ramped up to nominal current. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buckInstance</td><td>Pointer to a Buck Converter data object of type struct <a class="el" href="a01236.html" title="BUCK control &amp; monitoring data structure.">BUCK_CONVERTER_s</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success)</dd></dl>
<p>This phase of the soft-start ramp is only executed in average current mode and will only take effect when the declared current limit is hit before the nominal voltage regulation point. In this case the outer voltage loop will clamp the current reference value and the state will be switched to IRampUp, where the clamping value of the voltage loop output is ramped up to the declared maximum current reference value. This additional state allows powering up the power converter against highly capacitive loads preventing overshoots caused by down-stream capacitor inrush currents or when the converter is used as battery charger, where this state will tune into the constant current charging mode. </p>

<p class="definition">Definition at line <a class="el" href="a00275_source.html#l00337">337</a> of file <a class="el" href="a00275_source.html">dev_buck_substates.c</a>.</p>

</div>
</div>
<a id="gadfc2360fea5c8060908d58b134039f33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadfc2360fea5c8060908d58b134039f33">&#9670;&nbsp;</a></span>SubState_PowerGoodDelay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t SubState_PowerGoodDelay </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *&#160;</td>
          <td class="paramname"><em>buckInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>In this function, a counter is incremented until the power good delay has expired. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buckInstance</td><td>Pointer to a Buck Converter data object of type struct <a class="el" href="a01236.html" title="BUCK control &amp; monitoring data structure.">BUCK_CONVERTER_s</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success)</dd></dl>
<p>In this phase of the soft-start procedure a counter is incremented until the power good delay has expired before the soft-start process is marked as COMPLETED. If option for driving a user-defined general purpose output (PG output) is enabled in proprietary user code, this pin will be set automatically. </p>

<p class="definition">Definition at line <a class="el" href="a00275_source.html#l00387">387</a> of file <a class="el" href="a00275_source.html">dev_buck_substates.c</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00520_gadfc2360fea5c8060908d58b134039f33_cgraph.svg" width="532" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="gadd73e6f19bdc95fba0a9d8795c1700b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadd73e6f19bdc95fba0a9d8795c1700b1">&#9670;&nbsp;</a></span>SubState_PowerOnDelay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t SubState_PowerOnDelay </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *&#160;</td>
          <td class="paramname"><em>buckInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function delays the startup until the Power-on Delay has expired. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buckInstance</td><td>Pointer to a Buck Converter data object of type struct <a class="el" href="a01236.html" title="BUCK control &amp; monitoring data structure.">BUCK_CONVERTER_s</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success)</dd></dl>
<p>After the converter has been cleared to get started, the power-on delay counter is incremented until the defined power-on delay period has expired. </p>

<p class="definition">Definition at line <a class="el" href="a00275_source.html#l00050">50</a> of file <a class="el" href="a00275_source.html">dev_buck_substates.c</a>.</p>

</div>
</div>
<a id="gacf20000e16289d4bab8ed1d42dec2669"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacf20000e16289d4bab8ed1d42dec2669">&#9670;&nbsp;</a></span>SubState_PrepareVRampUp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t SubState_PrepareVRampUp </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *&#160;</td>
          <td class="paramname"><em>buckInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function calculate and pre-charge PWM outputs with ideal duty cycle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buckInstance</td><td>Pointer to a Buck Converter data object of type struct <a class="el" href="a01236.html" title="BUCK control &amp; monitoring data structure.">BUCK_CONVERTER_s</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success)</dd></dl>
<p>After the POWER ON DELAY has expired, the ramp up starting point is determined <br  />
 by measuring the input and output voltage and calculates the ideal duty ratio of the PWM. This value is then programmed into the PWM module duty cycle register and is also used to pre-charge the control loop output history. In addition the measured output voltage also set as reference to ensure the loop starts without jerks and jumps.</p>
<p>When voltage mode control is enabled, the voltage loop control history is charged, when average current mode control is enabled, the current loop control history is charged. </p>

<p class="definition">Definition at line <a class="el" href="a00275_source.html#l00095">95</a> of file <a class="el" href="a00275_source.html">dev_buck_substates.c</a>.</p>

</div>
</div>
<a id="ga588a594f3e5f4a20cf955b9445887be1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga588a594f3e5f4a20cf955b9445887be1">&#9670;&nbsp;</a></span>SubState_VRampUp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t SubState_VRampUp </td>
          <td>(</td>
          <td class="paramtype">volatile struct <a class="el" href="a01236.html">BUCK_CONVERTER_s</a> *&#160;</td>
          <td class="paramname"><em>buckInstance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function ramps up the output voltage to its nominal regulation point. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buckInstance</td><td>Pointer to a Buck Converter data object of type struct <a class="el" href="a01236.html" title="BUCK control &amp; monitoring data structure.">BUCK_CONVERTER_s</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unsigned integer (0=failure, 1=success)</dd></dl>
<p>This is the essential step in which the output voltage is ramped up by incrementing the outer control loop reference. In voltage mode the output <br  />
 voltage will ramp up to the nominal regulation point. In average current mode the inner loop will limit the voltage as soon as the current reference limit is hit and the output is switched to constant current mode. </p>

<p class="definition">Definition at line <a class="el" href="a00275_source.html#l00248">248</a> of file <a class="el" href="a00275_source.html">dev_buck_substates.c</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00520_ga588a594f3e5f4a20cf955b9445887be1_cgraph.svg" width="531" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <p style="height: 12px; padding-bottom: 8px; padding-right: 12px; vertical-align: bottom; text-align: right; font-size: 90%;">© 2021, Microchip Technology Inc.</p>
  </ul>
</div>
</body>
</html>
